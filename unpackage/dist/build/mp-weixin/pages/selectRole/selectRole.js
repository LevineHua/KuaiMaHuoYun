(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/selectRole/selectRole"],{"099f":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{role:"dirver",mobile:"",password:"",code:""}},onLoad:function(e){this.mobile=e.mobile,this.password=e.password,this.code=e.code,console.log(e)},methods:{selectRole:function(e){this.role=e},nextStep:function(){var t=this,o=t.serverURL,n=e.getStorageSync("wx_userInfo"),r=e.getStorageSync("openId");e.request({url:o+"home/login/register",method:"POST",data:{mobile:t.mobile,password:t.password,code:t.code,user_identity:"dirver"===t.role?1:0,wxchat_oppid:r,headimageurl:n.avatarUrl,username:n.nickName,pid:e.getStorageSync("recommendId")},success:function(o){if(console.log(o),100==o.data.code){var n={user_id:o.data.user_id,user_identity:o.data.user_identity};e.setStorageSync("uid",o.data.user_id),e.setStorageSync("userinfo",n),e.showToast({title:"绑定成功",icon:"success",mask:!0,success:function(){setTimeout(function(){"dirver"===t.role?e.request({url:t.serverURL+"home/login/get_user_grant_wechat_openid",method:"POST",data:{uid:o.data.user_id},success:function(t){console.log(t),e.setStorageSync("wxchat_oppid",t.data.wxchat_oppid),0==t.data.wxchat_oppid&&e.redirectTo({url:"../webview2/webview2?uid="+n.user_id})}}):e.request({url:t.serverURL+"home/login/get_user_grant_wechat_openid",method:"POST",data:{uid:o.data.user_id},success:function(t){console.log(t),e.setStorageSync("wxchat_oppid",t.data.wxchat_oppid),0==t.data.wxchat_oppid&&e.redirectTo({url:"../webview/webview?uid="+n.user_id})}})},1500)}})}},fail:function(e){console.log(e)}})}}};t.default=o}).call(this,o("543d")["default"])},1697:function(e,t,o){"use strict";o.r(t);var n=o("8793"),r=o("704e");for(var i in r)"default"!==i&&function(e){o.d(t,e,function(){return r[e]})}(i);o("1938");var a=o("2877"),s=Object(a["a"])(r["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports},1938:function(e,t,o){"use strict";var n=o("56dd"),r=o.n(n);r.a},"56dd":function(e,t,o){},"704e":function(e,t,o){"use strict";o.r(t);var n=o("099f"),r=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=r.a},8793:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},r=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return r})}},[["5d72","common/runtime","common/vendor"]]]);