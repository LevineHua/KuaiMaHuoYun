(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/uploadCard/uploadCard"],{"30f2":function(e,a,o){"use strict";var t=o("61a8"),n=o.n(t);n.a},"3fd9":function(e,a,o){"use strict";o.r(a);var t=o("66ed"),n=o.n(t);for(var c in t)"default"!==c&&function(e){o.d(a,e,function(){return t[e]})}(c);a["default"]=n.a},5973:function(e,a,o){"use strict";var t=function(){var e=this,a=e.$createElement;e._self._c},n=[];o.d(a,"a",function(){return t}),o.d(a,"b",function(){return n})},"61a8":function(e,a,o){},"66ed":function(e,a,o){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={data:function(){return{cardBack:"",cardDue:"",holdCard:"",cardName:"",cardId:"",userinfo:"",card_up:"",card_down:"",card_left:"",examine:"",cardIsTrue:100,type:0}},onLoad:function(a){var o=this;this.userinfo=e.getStorageSync("userinfo"),console.log(this.userinfo),this.examine=e.getStorageSync("examine"),this.type=a.type,1==this.type&&(e.setNavigationBarTitle({title:"修改身份证"}),e.request({url:o.serverURL+"/home/user/get_card_examine",method:"POST",data:{user_id:o.userinfo.user_id},success:function(e){console.log(e),100==e.data.code&&(o.cardDue=o.href+e.data.msg.card_up,o.cardBack=o.href+e.data.msg.card_down,o.holdCard=o.href+e.data.msg.card_left,o.cardName=e.data.msg.nickname,o.cardId=e.data.msg.card_num,o.card_up=e.data.msg.card_up,o.card_down=e.data.msg.card_down,o.card_left=e.data.msg.card_left)},fail:function(e){console.log(e)}}))},methods:{nextStep:function(){var a=this;if(""==a.card_up)e.showToast({title:"身份证正面照片不能为空",icon:"none",mask:!0});else if(""==a.card_down)e.showToast({title:"身份证反面照片不能为空",icon:"none",mask:!0});else if(""==a.card_left)e.showToast({title:"手持身份证照片不能为空",icon:"none",mask:!0});else if(""==a.cardName)e.showToast({title:"姓名不能为空",icon:"none",mask:!0});else if(""==a.cardId)e.showToast({title:"身份证号不能为空",icon:"none",mask:!0});else if(100!=a.cardIsTrue)e.showToast({title:"身份证有误",icon:"none",mask:!0});else{var o=a.serverURL;console.log(a.userinfo.user_id+";"+a.card_up+";"+a.card_down+";"+a.card_left+";"+a.cardName+";"+a.cardId),e.showModal({title:"",content:"我已确认并保证信息准确！",success:function(t){t.confirm&&e.request({url:o+"home/user/card_examine",method:"POST",data:{user_id:a.userinfo.user_id,card_up:a.card_up,card_down:a.card_down,card_left:a.card_left,nickname:a.cardName,card_num:a.cardId},success:function(o){console.log(o),100==o.data.code&&(1==a.type?(e.setStorageSync("examine",6),e.showToast({title:"上传成功",icon:"success",mask:!0,success:function(){setTimeout(function(){e.navigateBack()},1500)}})):4==a.examine?e.showToast({title:"上传成功",icon:"success",mask:!0,success:function(){setTimeout(function(){e.switchTab({url:"../index/index"})},1500)}}):e.showToast({title:"上传成功",icon:"success",mask:!0,success:function(){setTimeout(function(){e.redirectTo({url:"../uploadDrivingLicense/uploadDrivingLicense"})},1500)}}))}})}})}},selectCardImg:function(a){var o=this,t=o.serverURL;e.chooseImage({count:1,sourceType:["camera"],success:function(n){var c=n.tempFilePaths[0];console.log(c),console.log("选择图片成功"),e.showLoading({title:"上传中..."}),e.uploadFile({url:t+"index/index/uploadImage",filePath:c,name:"filePath",formData:{uid:o.userinfo.user_id},success:function(n){if(console.log(n),200==n.statusCode){var d=JSON.parse(n.data);100==d.code&&("back"==a?(o.cardBack=c,o.card_down=d.url,e.hideLoading()):"due"==a?(o.cardDue=c,o.card_up=d.url,e.request({url:t+"index/index/code_idcard",method:"POST",data:{image:d.url},success:function(a){console.log(a),e.hideLoading(),o.cardIsTrue=a.data.code,100==a.data.code?(o.cardName=a.data.date.words_result.姓名.words,o.cardId=a.data.date.words_result.公民身份号码.words):e.showModal({content:a.data.msg,confirmText:"确定",showCancel:!1})},fail:function(e){console.log(e)}})):"hold"==a&&(e.hideLoading(),o.holdCard=c,o.card_left=d.url),console.log("上传图片成功"))}},fail:function(){console.log("上传失败")},complete:function(){console.log("上传结束"),e.hideLoading()}})},fail:function(){console.log("选择图片失败")},complete:function(){console.log("选择图片完成")}})}}};a.default=o}).call(this,o("543d")["default"])},da7c:function(e,a,o){"use strict";o.r(a);var t=o("5973"),n=o("3fd9");for(var c in n)"default"!==c&&function(e){o.d(a,e,function(){return n[e]})}(c);o("30f2");var d=o("2877"),s=Object(d["a"])(n["default"],t["a"],t["b"],!1,null,null,null);a["default"]=s.exports}},[["ba41","common/runtime","common/vendor"]]]);