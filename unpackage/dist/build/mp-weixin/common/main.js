(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"4de1":function(e,t,o){},"5ece":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={onLaunch:function(){console.log("App Launch");var t=this,o=this.serverURL;e.getUserInfo({success:function(n){var a=n.userInfo;e.setStorageSync("wx_userInfo",a),e.checkSession({success:function(t){"checkSession:ok"==t.errMsg&&(console.log("登录状态未过期"),e.request({url:o+"home/user/get_user_information",method:"POST",data:{wxchat_oppid:e.getStorageSync("openId")},success:function(t){if(console.log("xxx"),300==t.data.code)e.redirectTo({url:"/pages/login/login?canGetUserInfo=0"});else if(100==t.data.code){var o={user_id:t.data.user_id,user_identity:t.data.user_type};e.setStorageSync("car_type",t.data.car_type),e.setStorageSync("examine",t.data.examine);var n=t.data.examine,a="";0==n?a="没有提交认证":2==n?a="身份审核未提交":3==n?a="驾驶证审核未提交":4==n?a="身份证审核拒绝":5==n&&(a="驾驶证审核拒绝"),2!=t.data.examine&&0!=t.data.examine&&4!=t.data.examine||"1"!=t.data.user_type?3!=t.data.examine&&5!=t.data.examine||"1"!=t.data.user_type||e.showToast({title:a,icon:"none",mask:!0,success:function(){setTimeout(function(){e.redirectTo({url:"/pages/uploadDrivingLicense/uploadDrivingLicense"})},1500)}}):e.showToast({title:a,icon:"none",mask:!0,success:function(){setTimeout(function(){e.redirectTo({url:"/pages/uploadCard/uploadCard"})},1500)}}),e.setStorageSync("userinfo",o),e.setStorageSync("userType",o),e.setStorageSync("loginCount",t.data.login_count)}},fail:function(t){console.log(t),e.showModal({title:"error",content:JSON.stringify(t)})}}))},fail:function(n){console.log(n),console.log("登录状态已过期"),e.login({provider:"weixin",success:function(n){console.log(n);var a=n.code;e.request({url:t.serverURL+"home/login/api_login",method:"POST",data:{code:a},success:function(t){var n=t.data.openid;e.setStorageSync("openId",n),e.request({url:o+"home/user/get_user_information",method:"POST",data:{wxchat_oppid:n},success:function(t){if(console.log(t),300==t.data.code)e.redirectTo({url:"/pages/login/login?canGetUserInfo=0"});else if(100==t.data.code){var o={user_id:t.data.user_id,user_identity:t.data.user_type};e.setStorageSync("car_type",t.data.car_type),e.setStorageSync("examine",t.data.examine);var n=t.data.examine,a="";0==n?a="没有提交认证":2==n?a="身份审核未提交":3==n?a="驾驶证审核未提交":4==n?a="身份证审核拒绝":5==n&&(a="驾驶证审核拒绝"),2!=t.data.examine&&0!=t.data.examine&&4!=t.data.examine||"1"!=t.data.user_type?3!=t.data.examine&&5!=t.data.examine||"1"!=t.data.user_type||e.showToast({title:a,icon:"none",mask:!0,success:function(){setTimeout(function(){e.redirectTo({url:"/pages/uploadDrivingLicense/uploadDrivingLicense"})},1500)}}):e.showToast({title:a,icon:"none",mask:!0,success:function(){setTimeout(function(){e.redirectTo({url:"/pages/uploadCard/uploadCard"})},1500)}}),e.setStorageSync("userinfo",o),e.setStorageSync("userType",o),e.setStorageSync("loginCount",t.data.login_count)}},fail:function(e){console.log(e)}})},fail:function(e){console.log(e)}})}})}})},fail:function(t){e.redirectTo({url:"/pages/login/login"})}})},onShow:function(){console.log("App Show");var t=this,o=e.getStorageSync("wxchat_oppid"),n=e.getStorageSync("userinfo");if(0==o&&""!=o&&e.request({url:t.serverURL+"home/login/get_user_grant_wechat_openid",method:"POST",data:{uid:n.user_id},success:function(t){console.log(t),e.setStorageSync("wxchat_oppid",t.data.wxchat_oppid),0==t.data.wxchat_oppid&&e.redirectTo({url:"page/webview/webview?uid="+n.user_id})}}),""!=n&&1==n.user_identity&&e.request({url:t.serverURL+"home/Order/get_user_order",method:"POST",data:{uid:n.user_id},success:function(o){if(console.log(o),100==o.data.code){var n=o.data.id;e.getLocation({type:"wgs84",success:function(o){var a=o.longitude+","+o.latitude;e.request({url:t.serverURL+"home/order/update_transportation_order",method:"POST",data:{let_lon:a,id:n},success:function(e){console.log(e)}})}})}}}),e.canIUse("getUpdateManager")){var a=e.getUpdateManager();a.onCheckForUpdate(function(t){t.hasUpdate&&(a.onUpdateReady(function(){e.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(e){e.confirm&&a.applyUpdate()}})}),a.onUpdateFailed(function(){e.showModal({title:"已经有新版本了哟~",content:"新版本已经上线啦~，请您删除当前小程序，重新搜索进入哟~"})}))})}else e.showModal({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"})},onHide:function(){console.log("App Hide")}};t.default=o}).call(this,o("543d")["default"])},"6f48":function(e,t,o){"use strict";o.r(t);var n=o("5ece"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"7fb7":function(e,t,o){"use strict";o.r(t);var n=o("6f48");for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o("a53f");var i,s,c=o("2877"),r=Object(c["a"])(n["default"],i,s,!1,null,null,null);t["default"]=r.exports},a53f:function(e,t,o){"use strict";var n=o("4de1"),a=o.n(n);a.a}},[["9138","common/runtime","common/vendor"]]]);